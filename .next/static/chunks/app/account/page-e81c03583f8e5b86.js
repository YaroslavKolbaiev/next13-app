(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{4184:function(e,s){var a;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var t={}.hasOwnProperty;function n(){for(var e=[],s=0;s<arguments.length;s++){var a=arguments[s];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)){if(a.length){var l=n.apply(null,a);l&&e.push(l)}}else if("object"===i){if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]")){e.push(a.toString());continue}for(var r in a)t.call(a,r)&&a[r]&&e.push(r)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0!==(a=(function(){return n}).apply(s,[]))&&(e.exports=a)}()},804:function(e,s,a){Promise.resolve().then(a.bind(a,1785))},2747:function(e){e.exports={logoText:"Account_logoText__PkabF",logoWrapper:"Account_logoWrapper__caWBz",logoImage:"Account_logoImage__z7_Ke"}},1785:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return j}});var t=a(1844),n=a(5675),i=a.n(n),l=a(5784),r=a(4184),o=a.n(r),c=a(3299),d=a(8945);async function u(e,s,a){e.preventDefault();try{await d.Z.post("/api/user/uploadAvatar",{avatar:s}),a(!1)}catch(e){console.log("uploading avatar failed")}}var h=a(2242),m=a(1969);let p=async e=>{let s=await fetch("/api/user/change-password",{method:"PATCH",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.message);return a};var f=a(8643),g=a(2747),x=a.n(g);function j(e){var s;let{avatar:a}=e,{data:n}=(0,c.useSession)(),[r,d]=(0,l.useState)(!0),[g,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(""),[b,y]=(0,l.useState)(!1),[w,S]=(0,l.useState)(!1),[k,_]=(0,l.useState)(!1),[C,P]=(0,l.useState)(-1),[A,F]=(0,l.useState)(""),Z=(0,l.useRef)(),O=null==n?void 0:null===(s=n.user)||void 0===s?void 0:s.email,I=e=>{Z.current.value=e},B=()=>{setTimeout(()=>{y(!1)},3e3)};async function T(e){e.preventDefault();try{await p({newPassword:v,oldPassword:g}),y(!0),B()}catch(e){console.log(e.message)}}return((0,l.useEffect)(()=>{(0,c.getSession)().then(e=>{e?d(!1):window.location.href="/auth"})},[]),r)?(0,t.jsx)(f.Z,{}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("section",{className:"hero is-dark is-bold",children:(0,t.jsxs)("div",{className:"hero-body has-text-centered",children:[(0,t.jsxs)("button",{type:"button",className:x().logoWrapper,onClick:()=>{_(!0)},children:[!a.length&&(0,t.jsx)("span",{className:x().logoText,children:"Click to change"}),(0,t.jsx)(i(),{className:x().logoImage,src:a.length?a:"/images/noAvatar.png",alt:"An image showing person",width:200,height:200})]}),(0,t.jsx)("p",{className:"title has-text-grey-light",children:O})]})}),(0,t.jsx)("section",{className:"section",children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("button",{className:"button is-dark mb-2",type:"button",onClick:()=>{S(!w)},children:"Change Password"}),w&&(0,t.jsxs)("form",{style:{maxWidth:"200px"},onSubmit:T,children:[(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("label",{htmlFor:"oldPass",className:"label",children:["Old Password",(0,t.jsx)("div",{className:"control",children:(0,t.jsx)("input",{onChange:e=>{j(e.target.value)},value:g,id:"oldPass",className:"input is-small is-rounded",type:"password"})})]})}),(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("label",{htmlFor:"newPass",className:"label",children:["New Password",(0,t.jsx)("div",{className:"control",children:(0,t.jsx)("input",{onChange:e=>{N(e.target.value)},value:v,id:"newPass",className:"input is-small is-rounded",type:"password"})})]})}),(0,t.jsx)("div",{className:"buttons",children:(0,t.jsx)("button",{className:"button is-small is-rounded is-dark",type:"submit",children:"Submit"})})]}),b&&(0,t.jsx)("p",{className:"notification is-success",children:"password changed"})]})}),(0,t.jsxs)("div",{className:o()("modal",{"is-active":k}),children:[(0,t.jsx)("div",{className:"modal-background"}),(0,t.jsx)("div",{className:"modal-content is-clipped",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsx)("div",{className:"columns is-centered",children:(0,t.jsx)("div",{className:"column is-half",children:(0,t.jsx)("div",{className:"box",children:(0,t.jsxs)("form",{onSubmit:e=>{u(e,A,_)},children:[(0,t.jsx)("div",{className:"file is-dark mb-2",children:(0,t.jsxs)("label",{htmlFor:"file",className:"file-label",children:[(0,t.jsx)("input",{id:"file",className:"file-input",type:"file",name:"resume",accept:"image/*",onChange:function(e){(0,m.Z)(e,P,F,I)},ref:Z}),(0,t.jsxs)("span",{className:"file-cta",children:[(0,t.jsx)("span",{className:"file-icon",children:(0,t.jsx)("i",{className:"fa-solid fa-upload"})}),(0,t.jsx)("span",{className:"file-label",children:"Upload File"})]})]})}),C>-1&&(0,t.jsxs)("progress",{className:"progress",value:C,max:"100",children:[C,"%"]}),A&&(0,t.jsxs)("div",{className:"notification",children:[(0,t.jsx)("button",{"aria-label":"delete",className:"delete",type:"button",onClick:function(){(0,h.Z)(A,I,F,P)}}),(0,t.jsx)("figure",{className:"image",children:(0,t.jsx)(i(),{src:A,alt:"img",height:200,width:200})})]}),(0,t.jsx)("button",{type:"submit",className:"button is-small is-dark mt-2",children:"Change avatar"})]})})})})})}),(0,t.jsx)("button",{onClick:()=>_(!1),type:"button",className:"modal-close","aria-label":"close"})]})]})}},8643:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(1844);function n(){return(0,t.jsx)("section",{className:"hero is-dark is-fullheight",children:(0,t.jsx)("div",{className:"hero-body",children:(0,t.jsx)("div",{className:"",children:(0,t.jsx)("p",{className:"title",children:"Loading please wait.."})})})})}a(5784)},532:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var t=a(6650),n=a(3977);let i=(0,n.ZF)({apiKey:"AIzaSyDBgCwuBOAvn-3-JOM6BNqfRju6U5gdyas",authDomain:"my-nextjs-storage.firebaseapp.com",projectId:"my-nextjs-storage",storageBucket:"my-nextjs-storage.appspot.com",messagingSenderId:"718032937442",appId:"1:718032937442:web:e739286cf848fcf19c59bb",measurementId:"G-X2KDT02245"}),l=(0,t.cF)(i),r=async(e,s,a)=>{let n=(0,t.iH)(l,s),i=(0,t.B0)(n,e);return i.on("state_changed",e=>{let s=Math.round(e.bytesTransferred/e.totalBytes*100);a(s)},e=>{throw e}),i.then(async()=>{let e=await (0,t.Jt)(i.snapshot.ref);return e})},o=e=>{let s=decodeURIComponent(e),a=s.indexOf("/o/")+3,n=s.indexOf("?"),i=s.substring(a,n),r=(0,t.iH)(l,i);return(0,t.oq)(r)};var c={uploadFile:r,deleteFile:o}},2242:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(532);function n(e,s,a,n){t.Z.deleteFile(e),s(null),a(""),n(-1)}},1969:function(e,s,a){"use strict";a.d(s,{Z:function(){return i}});var t=a(6281),n=a(532);async function i(e,s,a,i){let{files:l}=e.target,r=l[0];if(!r){alert("File Select failed. Please try again.");return}let o=(0,t.Vj)();try{let e=await n.Z.uploadFile(r,"storage/".concat(o),s);a(e)}catch(e){throw s(-1),i(null),alert(e.message),e}}}},function(e){e.O(0,[953,299,945,497,17,744],function(){return e(e.s=804)}),_N_E=e.O()}]);