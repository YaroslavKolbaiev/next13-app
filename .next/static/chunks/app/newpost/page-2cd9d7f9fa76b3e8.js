(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[944],{8514:function(e,s,t){Promise.resolve().then(t.bind(t,9862))},9862:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return f}});var a=t(1844),n=t(8945),l=t(3299),i=t(6281),c=t(5784),r=t(5675),o=t.n(r),u=t(8643),d=t(2242),m=t(1969);function f(){let[e,s]=(0,c.useState)(""),[t,r]=(0,c.useState)(""),[f,h]=(0,c.useState)(""),[x,p]=(0,c.useState)(!0),[j,N]=(0,c.useState)(-1),{data:g}=(0,l.useSession)(),v=(0,c.useRef)(),[b,y]=(0,c.useState)(!1),w=()=>{setTimeout(()=>{y(!1)},3e3)},S=e=>{v.current.value=e};async function Z(s){var a;s.preventDefault();let l=(0,i.Vj)(),c={slug:l,title:e,userEmail:null==g?void 0:null===(a=g.user)||void 0===a?void 0:a.email,image:t,excerpt:f};try{n.Z.post("/api/posts",c),y(!0),w()}catch(e){console.log("Fetching failed")}}return((0,c.useEffect)(()=>{(0,l.getSession)().then(e=>{e?p(!1):window.location.href="/auth"})},[]),x)?(0,a.jsx)(u.Z,{}):(0,a.jsx)("section",{className:"section",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"columns is-centered",children:(0,a.jsx)("div",{className:"column is-half",children:(0,a.jsxs)("div",{className:"box",children:[(0,a.jsxs)("form",{onSubmit:Z,className:"field",children:[(0,a.jsxs)("label",{htmlFor:"name",className:"label",children:["Title",(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:"name",value:e,onChange:e=>{s(e.target.value)},className:"input",type:"text",placeholder:"Text input"})})]}),(0,a.jsx)("div",{className:"file is-dark mb-2",children:(0,a.jsxs)("label",{htmlFor:"file",className:"file-label",children:[(0,a.jsx)("input",{id:"file",className:"file-input",type:"file",name:"resume",accept:"image/*",onChange:function(e){(0,m.Z)(e,N,r,S)},ref:v}),(0,a.jsxs)("span",{className:"file-cta",children:[(0,a.jsx)("span",{className:"file-icon",children:(0,a.jsx)("i",{className:"fa-solid fa-upload"})}),(0,a.jsx)("span",{className:"file-label",children:"Upload File"})]})]})}),j>-1&&(0,a.jsxs)("progress",{className:"progress",value:j,max:"100",children:[j,"%"]}),t&&(0,a.jsxs)("div",{className:"notification",children:[(0,a.jsx)("button",{"aria-label":"delete",className:"delete",type:"button",onClick:function(){(0,d.Z)(t,S,r,N)}}),(0,a.jsx)("figure",{className:"image",children:(0,a.jsx)(o(),{src:t,alt:"img",height:200,width:200})})]}),(0,a.jsxs)("label",{htmlFor:"text",className:"label",children:["Text",(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("textarea",{id:"text",value:f,onChange:e=>{h(e.target.value)},className:"textarea",placeholder:"Textarea"})})]}),(0,a.jsx)("button",{type:"submit",className:"button",children:"Create"})]}),b&&(0,a.jsx)("div",{className:"notification is-success",children:"New post created"})]})})})})})}},8643:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(1844);function n(){return(0,a.jsx)("section",{className:"hero is-dark is-fullheight",children:(0,a.jsx)("div",{className:"hero-body",children:(0,a.jsx)("div",{className:"",children:(0,a.jsx)("p",{className:"title",children:"Loading please wait.."})})})})}t(5784)},532:function(e,s,t){"use strict";t.d(s,{Z:function(){return o}});var a=t(6650),n=t(3977);let l=(0,n.ZF)({apiKey:"AIzaSyDBgCwuBOAvn-3-JOM6BNqfRju6U5gdyas",authDomain:"my-nextjs-storage.firebaseapp.com",projectId:"my-nextjs-storage",storageBucket:"my-nextjs-storage.appspot.com",messagingSenderId:"718032937442",appId:"1:718032937442:web:e739286cf848fcf19c59bb",measurementId:"G-X2KDT02245"}),i=(0,a.cF)(l),c=async(e,s,t)=>{let n=(0,a.iH)(i,s),l=(0,a.B0)(n,e);return l.on("state_changed",e=>{let s=Math.round(e.bytesTransferred/e.totalBytes*100);t(s)},e=>{throw e}),l.then(async()=>{let e=await (0,a.Jt)(l.snapshot.ref);return e})},r=e=>{let s=decodeURIComponent(e),t=s.indexOf("/o/")+3,n=s.indexOf("?"),l=s.substring(t,n),c=(0,a.iH)(i,l);return(0,a.oq)(c)};var o={uploadFile:c,deleteFile:r}},2242:function(e,s,t){"use strict";t.d(s,{Z:function(){return n}});var a=t(532);function n(e,s,t,n){a.Z.deleteFile(e),s(null),t(""),n(-1)}},1969:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(6281),n=t(532);async function l(e,s,t,l){let{files:i}=e.target,c=i[0];if(!c){alert("File Select failed. Please try again.");return}let r=(0,a.Vj)();try{let e=await n.Z.uploadFile(c,"storage/".concat(r),s);t(e)}catch(e){throw s(-1),l(null),alert(e.message),e}}}},function(e){e.O(0,[953,299,945,497,17,744],function(){return e(e.s=8514)}),_N_E=e.O()}]);