(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[333],{9754:function(e,s,a){Promise.resolve().then(a.t.bind(a,30,23)),Promise.resolve().then(a.bind(a,3007))},7951:function(e){e.exports={logoImage:"Comments_logoImage__9Nhed"}},3007:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return m}});var n=a(1844),t=a(3299),i=a(5784),l=a(5675),c=a.n(l);let r=async e=>{let s=await fetch("/api/comments",{method:"POST",body:JSON.stringify(e),headers:{"Content-type":"application/json"}}),a=await s.json();if(!s.ok)throw Error(a.message);return a};var o=a(7951),d=a.n(o);function m(e){let{excerpt:s,comments:a,postSlug:l,userEmail:o,avatar:m}=e,{data:h}=(0,t.useSession)(),[x,u]=(0,i.useState)("");async function j(){try{var e;await r({email:null==h?void 0:null===(e=h.user)||void 0===e?void 0:e.email,text:x,postSlug:l,avatar:m})}catch(e){console.log(e.message)}}return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("article",{className:"media",children:(0,n.jsxs)("div",{className:"media-content",children:[(0,n.jsx)("div",{className:"content",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:o}),(0,n.jsx)("br",{}),s]})}),(0,n.jsx)("hr",{}),a.map(e=>(0,n.jsxs)("article",{className:"media",children:[(0,n.jsx)("figure",{className:"media-left",children:(0,n.jsx)(c(),{className:d().logoImage,src:e.avatar?e.avatar:"/images/noAvatar.png",alt:"An image showing person",width:64,height:64})}),(0,n.jsx)("div",{className:"media-content",children:(0,n.jsx)("div",{className:"content",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:e.email}),(0,n.jsx)("br",{}),e.text]})})})]},e.postSlug))]})}),h&&(0,n.jsx)("article",{className:"media",children:(0,n.jsxs)("div",{className:"media-content",children:[(0,n.jsx)("div",{style:{maxWidth:"400px"},className:"field",children:(0,n.jsx)("p",{className:"control",children:(0,n.jsx)("textarea",{onChange:e=>{u(e.target.value)},value:x,className:"textarea",placeholder:"Add a comment..."})})}),(0,n.jsx)("div",{className:"field",children:(0,n.jsx)("p",{className:"control",children:(0,n.jsx)("button",{onClick:j,type:"button",className:"button",children:"Post comment"})})})]})})]})}}},function(e){e.O(0,[953,299,17,744],function(){return e(e.s=9754)}),_N_E=e.O()}]);